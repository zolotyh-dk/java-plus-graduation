# Explore With Me

Приложение позволяет пользователям делиться информацией об интересных 
событиях и находить компанию для участия в них

## Дополнительная функциональность: Подписки

Пользователь имеет возможность подписаться на события, публикуемые 
конкретным пользователем, и управлять такими подписками

---

### POST users/{userId}/subscriptions

подписаться на события, публикуемые конкретным пользователем

**Переменные пути**

| Наименование | Тип   | Описание                 |
|--------------|-------|--------------------------|
| userId       | int64 | id текущего пользователя |

**Параметры запроса**

| Наименование | Тип   | Описание                                                                             |
|--------------|-------|--------------------------------------------------------------------------------------|
| initiatorId  | int64 | id пользователя, на события которого осуществляется подписка (обязательный параметр) |

**Коды ответа**

| Код | Описание                                                    |
|-----|-------------------------------------------------------------|
| 200 | подписка выполнена успешно                                  |
| 400 | запрос составлен некорректно                                |
| 404 | текущий пользователь или пользователь-публикатор не найдены | 
| 409 | невозможно выполнить подписку/ подписка уже существует      |

---

### GET /users/{userId}/subscriptions

получить список событий из подписок текущего пользователя, по умолчанию
отсортированных по дате публикации

**Переменные пути**

| Наименование | Тип   | Описание                 |
|--------------|-------|--------------------------|
| userId       | int64 | id текущего пользователя |

**Параметры запроса**

| Наименование  | Тип         | Описание                                                                                   |
|---------------|-------------|--------------------------------------------------------------------------------------------|
| text          | string      | текст для поиска в содержимом аннотации и подробном описании события                       |
| categories    | int64 array | список идентификаторов категорий, в которых будет вестись поиск                            |
| paid          | boolean     | поиск только платных/ бесплатных событий                                                   |
| rangeStart    | string      | дата и время, не раньше которых должно произойти событие                                   |
| rangeEnd      | string      | дата и время, не позже которых должно произойти событие                                    |
| onlyAvailable | boolean     | только события, у которых не исчерпан лимит запросов на участие (по умолчанию равен false) |
| sort          | string      | может принимать значения EVENT_DATE и VIEWS (по умолчанию сортировка по дате публикации)   |
| from          | int32       | количество событий, которые надо пропустить (по умолчанию равен 0)                         |
| size          | int32       | количество отображаемых событий (по умолчанию равен 10)                                    |

**Тело ответа**

```json
{
   "id": 7,
   "initiator": {
      "id": 42,
      "name": "Santa Claus"
   },
   "title": "Winter Holidays",
   "category": {
      "id": 5,    
      "name": "Outdoors"
   },
   "eventDate": "2030-12-31 23:55:00",
   "annotation": "Let's do some skating, skiing and snowball fight",
   "paid": false,
   "confirmedRequests": false,
   "views": 8186481118
}
```

**Коды ответа**

| Код | Описание                       |
|-----|--------------------------------|
| 200 | запрос выполнен успешно        |
| 400 | запрос составлен некорректно   |
| 404 | текущий пользователь не найден | 

---

### DELETE /users/{userId}/subscriptions/{initiatorId}

отписаться от мероприятий пользователя с идентификатором `initiatorId`

**Переменные пути**

| Наименование | Тип   | Описание                                                           |
|--------------|-------|--------------------------------------------------------------------|
| userId       | int64 | id текущего пользователя                                           |
| initiatorId  | int64 | id пользователя, на события которого подписан текущий пользователь |

**Коды ответа**

| Код | Описание                                                    |
|-----|-------------------------------------------------------------|
| 204 | отмена подписки выполнена успешно                           |
| 400 | запрос составлен некорректно                                |
| 404 | текущий пользователь или пользователь-публикатор не найдены | 
